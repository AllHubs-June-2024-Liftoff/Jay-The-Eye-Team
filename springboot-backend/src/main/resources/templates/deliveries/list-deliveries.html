<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">
<head th:replace="~{fragments :: head}"></head>
<body>

<!--FRAGMENTS-->
<div th:replace="~{fragments :: page-header}"></div>
<div th:replace="~{fragments :: script-sort-by-column}"></div>
<div th:replace="~{fragments :: script-select-status-dropdown}"></div>

<!--SEARCH-->
<div class="page-title-container">
    <div style="display: flex; align-items: center; margin-right: 50px;">
        <div class="list-image-container">
            <img src="/images/food-delivery-2.png" alt="Delivery Image"/>
        </div>
        <div>
            <p class="bold-v1-page-title"> Manage Deliveries </p>
        </div>
    </div>
    <div th:replace="~{fragments :: search-box-for-table-edit}"></div>
</div>

<!--TABLE-->
<div>
    <table class="table-container-list editable-table"
           id="table-delivery"
           data-update-url-status="/deliveries/api-status">

        <tr class=" bold-v4 list-sorted-header">
            <td><strong><a href="javascript:void(0);" onclick="sortTable(0, true)">ID</a></strong></td>
            <td><strong><a href="javascript:void(0);" onclick="sortTable(1, false)">Date Created</a></strong></td>
            <td><strong><a href="javascript:void(0);" onclick="sortTable(2, false)">Customer</a></strong></td>
            <td><strong><a href="javascript:void(0);" onclick="sortTable(3, false)">Status</a></strong></td>
        </tr>

        <!-- ROWS PER ID-->
        <tr th:each="delivery : ${deliveries}" th:data-id="${delivery.id}">

            <td th:text="${delivery.id}" style="font-weight: bold;"></td>

            <td th:text="${#temporals.format(delivery.dateCreated, 'MMMM d, yyyy h:mm a')}" style="font-size:11px;"></td>
            <td th:text="${delivery.customer}"></td>

            <!-- Status dropdown -->
            <td>
                <select data-column="status" th:value="${delivery.status}"
                        class="list-dropdown-select" style="width: 150px;">

                    <option value="" th:selected="${delivery.status == null}" disabled
                            th:text="${delivery.status == null ? 'Select Status' : ''}">
                    </option>

                    <option th:each="statusOption : ${statusOptions}"
                            th:value="${statusOption}"
                            th:text="${#strings.capitalize(statusOption.name().toLowerCase())}"
                            th:selected="${delivery.status == statusOption}">
                    </option>
                </select>
            </td>

        </tr>
    </table>
</div>

</body>
</html>